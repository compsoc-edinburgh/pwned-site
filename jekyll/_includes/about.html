{% assign data = site.data.[page.year] %}

<div class="user-details">
  <h1><a id="about">About</a></h1>
  <p>
    SIGINT is proud to present <b>pwnEd {{ page.edition }}</b>, the {{ page.edition }}th edition of our cybersecurity
    competition for university students.
    The competition will follow a <b>quals/finals format</b>, where qualifying teams will be invited to the in-person
    finals hosted at our Edinburgh campus.
  </p>
  <p>
    Whether you're an expert in hacking or just simply looking to solve a challenge, <b>you won't want to miss it</b>.
  </p>
</div>

{% if page.event_over == True %}
<div class="user-details" style="margin-top:60px; text-align: center;">
  <p class="highlight">
    pwnEd {{ page.edition }} is now over! Thank you all for participating!
  </p>
  <p style="padding: 10px; background: #ffb300; color: black; font-size: 1.5em;">
    pwnEd {{ page.edition | plus: 1 }} is coming next year. <br> Keep updated on our
    <a aria-label="Discord" target="_blank" style="color: black;" href="https://discord.gg/8XPjTrCXK9"><span
        style="text-decoration: underline;">Discord</span> <i class="fa-brands fa-discord" aria-hidden="true"></i></a>!
  </p>
</div>
{% endif %}

<div class="user-details">
  <h1><a id="quals">Online Qualifiers</a></h1>
  <p style="margin-bottom: 0px">
    The qualifiers will be an online <b>jeopardy-style CTF</b> with a large variety of challenges covering everything
    from Binary Exploitation to Cryptography.
  </p>
  <div class="user">
    <div class="tech">
      <h2>When?</h2>
      <p><b>
          <a class="highlight">Starts</a>: {{ page.qual_start }} </br>
          <a class="highlight">Ends</a>: {{ page.qual_end }}
        </b></p>
    </div>
    <div class="tech">
      <h2>Where?</h2>
      <p><b>Anywhere on Earth.<br />
          <a class="highlight">Online</a>.
        </b></p>
      <p>
        Join our
        <a aria-label="Discord" target="_blank" href="https://discord.gg/8XPjTrCXK9">Discord <i
            class="fa-brands fa-discord" aria-hidden="true"></i></a>
      </p>
    </div>
    <div class="tech">
      <h2>Who?</h2>
      <p><b>UK university students.<br />
          Maximum of <a class="highlight">6 per team</a>.
        </b></p>
      <p>All skill levels welcome, including beginners!</p>
    </div>
  </div>
</div>

<div class="user-details">
  <h1>In-Person Finals and Conference</h1>
  <p>
    The event will consist of a <b>Capture The Flag (CTF) followed by a conference</b> which will determine the overall
    winners of pwnEd {{ page.edition }}.
  </p>
  <p>
    Bringing together <b>industry experts and top students</b> from across the country, the finals present a great
    opportunity for networking with top notch professionals and diving deeper into cybersecurity.
  </p>
  <p>
    Our <b>call for speakers</b> is now open! Please fill out the form <a
      href="https://forms.gle/Bz5XVTyRRoNpRK6L7">here</a> if you would like to present a ~50min talk. We are primarily
    looking for technical presentations, but are open to all topics.
  </p>
  <div class="user">
    <div class="tech">
      <h2>When?</h2>
      <p><b>
          <a class="highlight">CTF Finals</a></br>
          <a class="highlight">Date</a>: {{ page.finals_start | date: '%Y-%m-%d' }} </br>
          <a class="highlight">Time</a>: {{ page.finals_start | date: '%T' }}
        </b></p>
      <p><b>
          <a class="highlight">Conference</a></br>
          <a class="highlight">Date</a>: {{ page.conf_start | date: '%Y-%m-%d' }} </br>
          <a class="highlight">Time</a>: {{ page.conf_start | date: '%T' }}
        </b></p>
    </div>
    <div class="tech">
      <h2>Where?</h2>
      <p><b>In-person on our<br />
          <a class="highlight">Edinburgh</a>
          campus
          <a aria-label="Location" target="_blank" href="https://maps.app.goo.gl/fYTcfvRJZPKRK3yFA"> <i
              class="fa-solid fa-location-dot" aria-hidden="true"></i></a>
        </b></p>
    </div>
    <div class="tech">
      <h2>Who?</h2>
      <p>
        <b><a class="highlight">Qualifying teams only</a>.</b><br>
        Conference tickets available separately.
      </p>
    </div>
  </div>
</div>


<div class="user-details">
  <h1><a id="talks">Talks</a></h1>

  {% for talk in data.talks %}
    {%  capture img %} 
      {% if talk.speaker.img != nil %}    
        {{ talk.speaker.img }}
      {% else %}
        /assets/speakers/{{ talk.speaker.name | downcase | replace: ' ', '_' }}.png
      {% endif %}
    {% endcapture %}

    <div class="speaker-container">
      <img class="speaker-image" src="{{ img }}" alt="Speaker's Image">
      <div class="talk-info">
        <div class="talk-title">{{ talk.title }}</div>
        <div class="speaker-name" onclick="popUp(this)">
          {{ talk.speaker.name }}
          <span class="speaker-bio">
          {{ talk.speaker.bio }}
          </span>
        </div>
      </div>
    </div>
    <div class="talk-description">
      <span class="talk-abstract">
        {{ talk.abstract }}
      </span>
    </div>
    <br>
  {% endfor %}

<!--
<div class="user-details">
  <div class="prizes">
    <h2><a class="highlight">Prizes</a> (per team):</h2>
    <div id="first-place"> üèÜ ¬£1000 </div>
    <div id="second-place"> ü•à ¬£500 </div>
    <div id="third-place"> ü•â ¬£250 </div>
  </div>
</div>

-->
<div class="user-details">
  <h2>Many thanks to our <a class="highlight">event sponsors</a>:</h2>
</div>

<br>

{% for sponsor_tier in data.sponsors %}

  {% comment %} 
  Skip infra sponsors as they're displayed separately at the bottom
  sponsor_tier[0] contains the sponsor tier name
    sponsor_tier[1] contains the list of sponsors. If it's nil, that means there are no sponsors in that tier
  {% endcomment %}

  {% if sponsor_tier[1] == nil %}
    {% continue %}
  {% endif %}

  {% if sponsor_tier[0] == "infra" %} 
    {% continue %}
  {% endif %}


  <h2> {{ sponsor_tier[0] | capitalize }} </h2>
  <div class="user" style="margin-bottom: 50px;">
    <div class="tech">
      {% comment %} This is to dynamically resize the sponsors {% endcomment %}
      {% assign row_size = 3 %}
      {% assign rows = sponsor_tier[1].size | divided_by: row_size | ceil %} 
      {% assign current_row_size =  sponsor_tier[1].size |  at_most: row_size %}
      {% assign element_width = 600 |  divided_by: current_row_size |  at_most: 300  %}

      {% for idx in (0..rows) %}
        <div class="sponsors">
          {% assign offset = forloop.index0 | times: row_size %}
          <div class="sponsor_row" width="600px">
          {% for sponsor in sponsor_tier[1] offset:offset limit:row_size %}
            {% comment %} TODO: Add class for sponsors so i don't have an aneurism {% endcomment %}
            <a href="{{ sponsor.url }}" target="_blank" style="margin: auto ; font-size: 0">
              <img src="{{ sponsor.logo }}" class="sponsor" style="max-width: {{element_width}}px;"/>
            </a>
          {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

{% endfor %} 



{% for sponsor in data.sponsors.infra %}
<div style="width:30vw; margin: 70px auto 50px auto; display: flex; align-items: center; justify-content: center;">
  <img src="{{ sponsor.logo }}" width="60%" style="float:left; margin-right:20px;"
    alt="{{ sponsor.name }} Logo" title="{{ sponsor.name }} Logo" />
  <h3 style="margin:0px; padding:0px; display:inline; font-size: 1.45rem;">
    Infra sponsored by
    <a style="text-decoration:underline;" href="{{ sponsor.url }}" target="_blank">
      {% assign split_url = sponsor.url | split: "/" %}
      {{ split_url[2] }}
    </a>
  </h3>
</div>
{% endfor %}